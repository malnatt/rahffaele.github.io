<!DOCTYPE html>
<html>
  <head>
    <style>
      .box {
        width: 50px;
        height: 50px;
        background-color: red;
        position: absolute;
        transform-origin: center bottom;
      }
    </style>
    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="style.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js"></script>
  </head>
  <body>
  	<div>
		<a href="../index.html" class="bc">Home</a>
		<a href="../portfolio.html" class="bc_selected">Portfolio</a>
		<a href="../archives.html" class="bc">Archive</a>
		<a href="../about.html" class="bc">About me</a>
	</div>
    <div id="box1" class="box"></div>
    <div id="box2" class="box"></div>
    <div id="box3" class="box"></div>
    <div id="box4" class="box"></div>
  </body>
  <script>
    const boxes = document.querySelectorAll('.box');
    const gravity = 0.2;

    boxes.forEach((box, index) => {
      let x = Math.random() * window.innerWidth;
      let y = 0;
      let velocity = 0;
      let rotation = 0;
      let rotationSpeed = 0;

      box.style.left = x + 'px';

      const update = () => {
        velocity += gravity;
        y += velocity;

        // Check for collision with other boxes
        boxes.forEach((otherBox, otherIndex) => {
          if (otherIndex === index) return;

          const isColliding = checkCollision(box, otherBox);
          if (isColliding) {
            velocity = velocity*2;
          }
        });

        box.style.top = y + 'px';

        if (y + box.offsetHeight > window.innerHeight) {
          velocity = -velocity * 0.4;
          rotationSpeed = velocity / 10;
          y = window.innerHeight - box.offsetHeight;
        } else {
          rotationSpeed = velocity / 5;
        }

        rotation += rotationSpeed;
        box.style.transform = `rotate(${rotation}deg)`;

        requestAnimationFrame(update);
      };

      update();
    });

    function checkCollision(a, b) {
      const aRect = a.getBoundingClientRect();
      const bRect = b.getBoundingClientRect();

      return !(
        (aRect.bottom < bRect.top) || (aRect.top > bRect.bottom) || (aRect.right < bRect.left) || (aRect.left > bRect.right)
      );
    }
  </script>
</html>

